// See https://css-tricks.com/snippets/css/fluid-typography/

// >>> Controllers — START
@use "../controllers/functions" as *; // controllers for functions
// <<<<< Controllers — END

// The equation
//
// body {
// 	font-size: calc([minimum size] + ([maximum size] - [minimum size]) * ((100vw - [minimum viewport width]) / ([maximum viewport width] - [minimum viewport width])));
// }

// The mixin
//
// @use "sass:math";
//
// See https://stackoverflow.com/questions/12328259/how-do-you-strip-the-unit-from-any-number-in-sass
// @function strip_unit($value) {
// 	@return math.div($value, ($value * 0 + 1));
// }

@mixin fluid_type(
	// prettier-ignore
	// >>>>> VIEWPORT <<<<<
	$viewport-min: 20em /*(320px)*/,
	// Set global values
	$viewport-max: 100em /*(1600px)*/,
	// Set global values
	// >>>>> MOBILE <<<<<
	$font-size-min: null,
	$line-height-mobile: null,
	// >>>>> DESKTOP <<<<<
	$font-size-max: null,
	$line-height-desktop: null,
	// >>>>> IMPORTANT <<<<<
	$important: null
) {
	@media (max-width: 319.98px) {
		font-size: $font-size-min #{$important};
		line-height: $line-height-mobile #{$important};
	}

	@media (min-width: $viewport-min) and (max-width: 575.98px) {
		$range-vw: round_3(strip_unit($viewport-max - $viewport-min));
		$delta-fs: round_3(strip_unit($font-size-max - $font-size-min));

		font-size: clamp(
				#{$font-size-min},
				calc(#{$font-size-min} + (#{$delta-fs} * (((100vw - #{$viewport-min}) / #{$range-vw}) * 2))),
				#{$font-size-max}
			)
			#{$important};
		line-height: #{$line-height-mobile} #{$important};
	}

	@media (min-width: 576px) and (max-width: calc(#{$viewport-max} - 0.02px)) {
		$range-vw: round_3(strip_unit($viewport-max - $viewport-min));
		$delta-fs: round_3(strip_unit($font-size-max - $font-size-min));

		font-size: clamp(
				#{$font-size-min},
				calc(#{$font-size-min} + (#{$delta-fs} * (((100vw - #{$viewport-min}) / #{$range-vw}) * 1))),
				#{$font-size-max}
			)
			#{$important};
		line-height: #{$line-height-desktop} #{$important};
	}

	@media (min-width: $viewport-max) {
		font-size: $font-size-max #{$important};
		line-height: $line-height-desktop #{$important};
	}
}

// The formula
//
// @include fluid_type($min_width, $max_width, $mob_multi, $desk_multi, $min_font, $max_font);
// $min_width: 20em;
// $max_width: 100em;
// $mob_multi: 1.5;
// $desk_multi: 1.2;

// .example {
// 	@include fluid_type($min_width, $max_width, $mob_multi, $desk_multi, 1.73rem, 2.5rem);
// }
